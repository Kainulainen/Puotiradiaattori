@import "compass/css3/images";
@import "compass/css3/box-sizing";
@import "compass/css3/border-radius";
@import "compass/css3/box-shadow";
@import "compass/css3/images";
@import "compass/css3/transform";
@import "compass/css3/transition";
@import "compass/css3/text-shadow";

@mixin checkersBackground($color) {
  @include background(linear-gradient(45deg, $color 25%, transparent 25%, transparent), linear-gradient(-45deg, $color 25%, transparent 25%, transparent), linear-gradient(45deg, transparent 75%, $color 75%), linear-gradient(-45deg, transparent 75%, $color 75%));
}

$planeWidth: 80px;
$planeHeight: 100px;
$bodyBgColor: #216C2A;

* {@include box-sizing(border-box);}
body {@include checkersBackground($bodyBgColor); background-color: darken($bodyBgColor, 2%);  background-size: 50px 50px; color: #fff; font: 1em Helvetica,Arial; text-align: center;}
h1 {display: table; margin:0 auto; font-size: 3em; color: darken($bodyBgColor, 6%); @include text-shadow(0 1px 0 rgba(255, 255, 255, 0.3), 0 -1px 0 rgba(0, 0, 0, 0.4));}
.currency {border:0; font-size: 1.5em; line-height: 100%; display: table-cell; vertical-align: middle; padding: 0 0 0 0.1em}

// todo adjust perspective  -webkit-perspective: 800; -webkit-perspective-origin: 50% 225%;
.counter {position: relative; display: inline-block; width: auto; height: 104px; overflow: hidden; margin:0; padding:1px; border: 2px solid #ccc; @include border-radius(5px); background: #fff; @include box-shadow(inset 0 0 20px #000000);}
.spinner {position: relative; float: right; top:0; width: $planeWidth; height: $planeHeight; margin-left: 1px; @include transform-style(preserve-3d); counter-reset: digits -1;}

.plane {display: table; position: absolute;
  width: $planeWidth;
  height: $planeHeight;
  @include backface-visibility(hidden);
  border: 1px solid #ccc;
  @include border-radius(5px);
  @include background-image(linear-gradient(#ffffff, #cccccc, #aaaaaa));
  @include box-shadow(inset 0 0 5px #343434);

  .number {
    &:before {counter-increment: digits; content: counter(digits);};
    display: table-cell;
    vertical-align: middle;
    font: normal ($planeHeight / 1.5) Times, serif;
    color: #343434;
    text-align: center;
    text-shadow: 1px 1px #fff, -1px -1px #444;
  }
}

@for $plane from 0 through 9 {
   $angle: $plane * 36;
   $tenGonInRadius: 1.53884;

   .digit-#{$plane} {@include transform(rotateX(#{$angle}deg) translateZ($planeHeight * $tenGonInRadius))}
   .spinner.roll-to-#{$plane} {@include transition(all 3s ease-in); @include transform(rotateX(-#{$angle}deg))}
}